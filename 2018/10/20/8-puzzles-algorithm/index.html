<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    
        <title>
            
                8-puzzles algorithm |
                    
                        Make everyday count!
        </title>
        <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
        
                <meta name="keywords" content="Swift, Python, ML, CV" />
                
                        
                                
                                        
                                                <meta name="description" content="AIMA: 8-puzzles    topics: DFS, IDS, A*, Greedy, Informed Search 1    题目描述 8-puzzle problem Given any randomly generated start state and a goal state shown below, implement the IDS, greedy search and">
<meta name="keywords" content="algorithm,search">
<meta property="og:type" content="article">
<meta property="og:title" content="8-puzzles algorithm">
<meta property="og:url" content="http://blog.x-fei.me/2018/10/20/8-puzzles-algorithm/index.html">
<meta property="og:site_name" content="Make everyday count!">
<meta property="og:description" content="AIMA: 8-puzzles    topics: DFS, IDS, A*, Greedy, Informed Search 1    题目描述 8-puzzle problem Given any randomly generated start state and a goal state shown below, implement the IDS, greedy search and">
<meta property="og:locale" content="en">
<meta property="og:image" content="http://blog.x-fei.me/images/IDS.png">
<meta property="og:image" content="http://blog.x-fei.me/images/DFS.png">
<meta property="og:image" content="http://blog.x-fei.me/images/aStar.png">
<meta property="og:image" content="http://blog.x-fei.me/images/IDS_run.png">
<meta property="og:image" content="http://blog.x-fei.me/images/Greedy_run1.png">
<meta property="og:image" content="http://blog.x-fei.me/images/Greedy_run2.png">
<meta property="og:image" content="http://blog.x-fei.me/images/AStar_run1.png">
<meta property="og:image" content="http://blog.x-fei.me/images/AStar_run2.png">
<meta property="og:updated_time" content="2018-10-20T02:06:10.049Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="8-puzzles algorithm">
<meta name="twitter:description" content="AIMA: 8-puzzles    topics: DFS, IDS, A*, Greedy, Informed Search 1    题目描述 8-puzzle problem Given any randomly generated start state and a goal state shown below, implement the IDS, greedy search and">
<meta name="twitter:image" content="http://blog.x-fei.me/images/IDS.png">
                                                    

                                                            

                                                                <link rel="icon" href="/css/images/mylogo.png">
                                                                <link rel="apple-touch-icon" href="/css/images/mylogo.png">
                                                                
                                                                    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
                                                                    
                                                                        <link href="https://fonts.googleapis.com/css?family=Open+Sans|Montserrat:700" rel="stylesheet" type="text/css">
                                                                        <link href="https://fonts.googleapis.com/css?family=Roboto:400,300,300italic,400italic" rel="stylesheet" type="text/css">
                                                                        <link href="//cdn.bootcss.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet">
                                                                        <style type="text/css">
                                                                            @font-face {
                                                                                font-family: futura-pt;
                                                                                src: url(https://use.typekit.net/af/9749f0/00000000000000000001008f/27/l?subset_id=2&fvd=n5) format("woff2");
                                                                                font-weight: 500;
                                                                                font-style: normal;
                                                                            }
                                                                            
                                                                            @font-face {
                                                                                font-family: futura-pt;
                                                                                src: url(https://use.typekit.net/af/90cf9f/000000000000000000010091/27/l?subset_id=2&fvd=n7) format("woff2");
                                                                                font-weight: 500;
                                                                                font-style: normal;
                                                                            }
                                                                            
                                                                            @font-face {
                                                                                font-family: futura-pt;
                                                                                src: url(https://use.typekit.net/af/8a5494/000000000000000000013365/27/l?subset_id=2&fvd=n4) format("woff2");
                                                                                font-weight: lighter;
                                                                                font-style: normal;
                                                                            }
                                                                            
                                                                            @font-face {
                                                                                font-family: futura-pt;
                                                                                src: url(https://use.typekit.net/af/d337d8/000000000000000000010095/27/l?subset_id=2&fvd=i4) format("woff2");
                                                                                font-weight: 400;
                                                                                font-style: italic;
                                                                            }
                                                                        </style>
                                                                        <link rel="stylesheet" href="/css/style.css">

                                                                            <script src="/js/jquery-2.0.3.min.js"></script>
                                                                                <script src="/js/bootstrap.js"></script>
                                                                                    <script src="/js/bigfoot.min.js"></script>

                                                                                        <!-- Bootstrap core CSS -->
                                                                                        <link rel="stylesheet" href="/css/bootstrap.css">

                                                                                        
                                                                                                <link rel="stylesheet" href="/css/dialog.css">
                                                                                                    <link rel="stylesheet" href="/css/bigfoot-default.css">
                                                                                                        <link rel="stylesheet" href="/css/directory.css">
                                                                                                            

                                                                                                                

                                                                                                                        
                                                                                                                            <link rel="stylesheet" href="/css/header-post.css">
                                                                                                                            

                                                                                                                                

                                                                                                                                        

</head>


  <body data-spy="scroll" data-target="#toc" data-offset="50">


  
  <div id="container">
    <div id="wrap">
      
        <header>

    <div id="allheader" class="navbar navbar-default navbar-static-top" role="navigation">
        <div class="navbar-inner">

            <div class="container">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
              <span class="sr-only">Toggle navigation</span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
            </button>

                
                    <a class="brand" style="
                 border-width: 0px;  margin-top: 0px;" href="#" data-toggle="modal" data-target="#myModal" >
                  <img width="124px" height="124px" alt="Hike News" src="/css/images/mylogo.png">
              </a>
                    

                            <div class="navbar-collapse collapse">
                                <ul class="hnav navbar-nav">
                                    
                                        <li>
                                            <a class="main-nav-link" href="/">
                                                BLOG
                                            </a>
                                        </li>
                                        
                                        <li>
                                            <a class="main-nav-link" href="/archives">
                                                ARCHIVES
                                            </a>
                                        </li>
                                        
                                        <li>
                                            <a class="main-nav-link" href="/friends">
                                                FRIENDS
                                            </a>
                                        </li>
                                        
                                            <li>
                                                <a id="beautifont" class="main-nav-link" target="_blank" href="http://x-fei.me">WHOAMI</a>
                                                <!-- <a id="beautifont" class="main-nav-link" href="/Resume.pdf">RESUME</a> -->
                                            </li>
                                            <li>
                                                <!-- <a id="beautifont" class="main-nav-link" href="/atom.xml">RSS</a> -->
                                            </li>
                                            <li>
                                                <!-- <div id="search-form-wrap">

    <form class="search-form">
        <input type="text" class="ins-search-input search-form-input" placeholder="" />
        <button type="submit" class="search-form-submit"></button>
    </form>
    <div class="ins-search">
    <div class="ins-search-mask"></div>
    <div class="ins-search-container">
        <div class="ins-input-wrapper">
            <input type="text" class="ins-search-input" placeholder="Type something..." />
            <span class="ins-close ins-selectable"><i class="fa fa-times-circle"></i></span>
        </div>
        <div class="ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script>
(function (window) {
    var INSIGHT_CONFIG = {
        TRANSLATION: {
            POSTS: 'Posts',
            PAGES: 'Pages',
            CATEGORIES: 'Categories',
            TAGS: 'Tags',
            UNTITLED: '(Untitled)',
        },
        ROOT_URL: '/',
        CONTENT_URL: '/content.json',
    };
    window.INSIGHT_CONFIG = INSIGHT_CONFIG;
})(window);
</script>
<script src="/js/insight.js"></script>

</div> -->
                                            </li>
                            </div>
            </div>

        </div>
    </div>
</header>


      
            
      <div id="content" class="outer">
        
          <section id="main" style="float:none;"><article id="post-8-puzzles-algorithm" style="width: 75%; float:left;"
     class="article article-type-
        post" itemscope itemprop="blogPost" >
            <div id="articleInner" class="article-inner">
                
                    
                        <header class="article-header">
                            
  
    <h1 class="thumb" class="article-title" itemprop="name">
      8-puzzles algorithm
    </h1>
  

                        </header>
                        
                            <div class="article-meta">
                                
	<a href="/2018/10/20/8-puzzles-algorithm/" class="article-date">
	  <time datetime="2018-10-20T01:19:29.000Z" itemprop="datePublished">2018-10-20</time>
	</a>

                                    
    <a class="article-category-link" href="/categories/Machine-Learning/">Machine Learning</a>

                                        
                            </div>
                            <div class="article-entry" itemprop="articleBody">
                                
                                            <center>AIMA: 8-puzzles</center>  

<p><strong>topics</strong>: <code>DFS</code>, <code>IDS</code>, <code>A*</code>, <code>Greedy</code>, <code>Informed Search</code> <sup id="fnref:1"><a href="#fn:1" rel="footnote">1</a> </sup>  </p>
<h2 id="题目描述"><a href="#题目描述" class="headerlink" title="题目描述"></a>题目描述</h2><pre>
8-puzzle problem
Given any randomly generated start state and a goal state shown below, implement the IDS, greedy search and A* search algorithms, respectively, to find a sequence of actions that will transform the state from the start state to the goal state.
</pre>  

<a id="more"></a>
<h2 id="要求"><a href="#要求" class="headerlink" title="要求"></a>要求</h2><pre>
1) When implementing the A* search algorithm, you need to use at least two different
heuristic functions
2) Compare the running time of these different searching algorithms, and do some
analyses on your obtained results. Note that the reported running time should be
averaged on many randomly generate different start states.
</pre>  

<h2 id="问题解析"><a href="#问题解析" class="headerlink" title="问题解析"></a>问题解析</h2><h3 id="是否有解"><a href="#是否有解" class="headerlink" title="是否有解"></a>是否有解</h3><p>首先对于八数码问题，存在有解和无解的情况，为了使得我们后续的程序能正常测试，我们需要对给定的随机初始状态进行检测，从而得到一定有解的随机初始状态。<br>根据维基百科，如果给定初始状态的逆序和为偶数，那么问题有解，否则无解。  </p>
<p>生成有解的随机初始状态有两种做法。一是生成随机的状态，检测是否有解，无解则继续生成，直到生成有解的状态并返回。二是逆序推导，从目标状态出发，随机选择方向走若干步得到随机状态。  </p>
<p>这里我们为了方便，将空白格用数字0表示。</p>
<p>两种做法的代码如下：  </p>
<pre><code class="py"><span class="comment"># Solution 1: genRandomState-&gt;check-&gt;genRandomState....</span>
<span class="function"><span class="keyword">def</span> <span class="title">genRandomState</span><span class="params">()</span>:</span>
    puzzle = [x <span class="keyword">for</span> x <span class="keyword">in</span> range(<span class="number">9</span>)]
    random.shuffle(puzzle)
    puzzle = np.asarray(puzzle).reshape((<span class="number">3</span>,<span class="number">3</span>))
    <span class="keyword">return</span> puzzle
<span class="comment"># getInvCount</span>
<span class="function"><span class="keyword">def</span> <span class="title">getInvCount</span><span class="params">(state)</span>:</span>
    state = state.flatten()
    int_count = <span class="number">0</span>
    <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">8</span>):
        <span class="keyword">for</span> j <span class="keyword">in</span> range(i+<span class="number">1</span>, <span class="number">9</span>):
            <span class="keyword">if</span> state[j] <span class="keyword">and</span> state[i] <span class="keyword">and</span> state[i] &gt; state[j]:
                int_count += <span class="number">1</span>
    <span class="keyword">return</span> int_count
<span class="comment"># judge</span>
<span class="function"><span class="keyword">def</span> <span class="title">isSolvable</span><span class="params">(state)</span>:</span>
    invCount = getInvCount(state)
    <span class="keyword">return</span> invCount % <span class="number">2</span> == <span class="number">0</span>:

<span class="function"><span class="keyword">def</span> <span class="title">genSolvableRandomState</span><span class="params">()</span>:</span>
    puzzle = genRandomState()
    <span class="keyword">if</span> isSolvable(puzzle):
        <span class="keyword">return</span> puzzle
    <span class="keyword">else</span>:
        <span class="keyword">return</span> genSolvableRandomState()

<span class="comment"># Solution 2: targetState-&gt;randomWalk-&gt;randomState  </span>
<span class="function"><span class="keyword">def</span> <span class="title">shuffle</span><span class="params">(self, numAct)</span>:</span>
    <span class="keyword">for</span> i <span class="keyword">in</span> range(numAct):
        self.move(self.directions[random.randint(<span class="number">0</span>, <span class="number">3</span>)])

<span class="function"><span class="keyword">def</span> <span class="title">move</span><span class="params">(self, direction)</span>:</span>
    <span class="keyword">if</span> direction == <span class="string">'U'</span>:
        self.up()
    <span class="keyword">if</span> direction == <span class="string">'D'</span>:
        self.down()
    <span class="keyword">if</span> direction == <span class="string">'L'</span>:
        self.left()
    <span class="keyword">if</span> direction == <span class="string">'R'</span>:
        self.right()
</code></pre>
<p><strong>思考</strong>：<br>第二种做法里，我们需要对状态做一些变化，从当前状态到下一个状态，需要判断可以走的方向，并更新0点的位置，都是一些可以重复并高度聚合的方法，因此可以将这些操作都封装到<code>Puzzle</code>类中。  </p>
<h3 id="IDS"><a href="#IDS" class="headerlink" title="IDS"></a>IDS</h3><p>IDS算法的伪代码如下：  </p>
<div align="center"><br><img src="/images/IDS.png" width="60%" alt="IDS"><br></div>   

<p>IDS(<code>Iterative deepening search</code>)的核心在于，使用迭代深度限制深度搜索，使得每次只搜索到指定的深度。因此也需要对<code>DFS</code>有较深的理解。<br>这样做虽然会使得高层的节点被反复访问多次，但是可以推导出，最底层的节点数是最多的，将问题简化为二叉树，那么最底层有总体一半的节点，同时我们需要前序节点的信息去访问后续节点，因此在深度较深的时候，前面反复访问的时间可以不用去管。<br><code>Depth-Limited-Search</code>基于<code>DFS</code>，<code>DFS</code>的伪代码如下：  </p>
<div align="center"><br><img src="/images/DFS.png" width="60%" alt="DFS"><br></div>  

<p><strong>思考</strong>：<br>这里我们需要维护的信息是深度信息，而且由于当前状态可能的子节点最多有四个，所以子节点的信息最好和父节点绑定，所以在设计<code>Puzzle</code>类的时候，我们可以绑定父节点<code>parent</code>，计算与判断当前节点的深度也相对方便。<br>在IDS中，我们更多的需要对<code>节点</code>进行操作，而不是直接对<code>Puzzle</code>操作，所以可以尝试构建<code>Node</code>类，简化代码逻辑。</p>
<p>IDS实现代码如下：  </p>
<pre><code class="py"><span class="function"><span class="keyword">def</span> <span class="title">IDS</span><span class="params">(self)</span>:</span>
    depth = <span class="number">0</span>
    result = <span class="keyword">None</span>
    <span class="keyword">while</span> result == <span class="keyword">None</span>:
        result = self.depthLimited(depth)
        depth += <span class="number">1</span>
    <span class="keyword">return</span> result

<span class="function"><span class="keyword">def</span> <span class="title">depthLimited</span><span class="params">(self, depth)</span>:</span>
    stack = LifoQueue()
    stack.put(self.start)
    <span class="keyword">while</span> <span class="keyword">True</span>:
        <span class="keyword">if</span> stack.empty():
            <span class="keyword">return</span> <span class="keyword">None</span>
        top = stack.get()
        <span class="keyword">if</span> top.isGoal():
            <span class="keyword">return</span> top
        <span class="keyword">elif</span> top.depth <span class="keyword">is</span> <span class="keyword">not</span> depth:
            <span class="keyword">for</span> neighbor <span class="keyword">in</span> top.neighbors():
                stack.put(neighbor)
</code></pre>
<h3 id="Uninformed-v-s-Informed-search"><a href="#Uninformed-v-s-Informed-search" class="headerlink" title="Uninformed v.s. Informed search"></a>Uninformed v.s. Informed search</h3><p><code>Uninformed Search</code>，不知情搜索，无先验知识的搜索，通俗一点理解就是摸着石头过河，把所有可能的路都走一遍。个人理解，不同之处就在于走的顺序是全随机，还是半随机，对于DFS和BFS，可以归类为全随机，而IDS可以算半随机。<br><code>Uninformed Search</code>，先验搜索，启发式搜索，像是有了一把自己定义的尺子，可以衡量某一状态到目标状态的距离，通过这个先验知识去确定下一个最接近目标状态的中间状态。  </p>
<h3 id="Greedy"><a href="#Greedy" class="headerlink" title="Greedy"></a>Greedy</h3><p>对中间状态的选择取决于其到目标状态的“距离”，这个距离可以有不同的衡量标准。贪心算法基于“距离”，通过维护一个优先队列，每次选择距离目标状态最近的中间状态去扩展。为了避免陷入死循环，维护<code>visited</code>数组。<br>贪心算法的实现如下：  </p>
<pre><code class="py"><span class="function"><span class="keyword">def</span> <span class="title">greedy</span><span class="params">(self, heuristic_mode)</span>:</span>
    cur_node = self.start
    nodes = PriorityQueue()
    nodes.put((cur_node.cost(heuristic_mode), cur_node))
    visited = []
    <span class="keyword">while</span> <span class="keyword">True</span>:
        <span class="keyword">if</span> nodes.empty():
            <span class="keyword">return</span> <span class="keyword">None</span>
        cur_node = nodes.get()[<span class="number">1</span>]
        <span class="keyword">if</span> cur_node.isGoal():
            <span class="keyword">return</span> cur_node
        <span class="keyword">elif</span> cur_node.state.puzzle <span class="keyword">not</span> <span class="keyword">in</span> visited:
            visited.append(cur_node.state.puzzle)
            <span class="keyword">for</span> neighbor <span class="keyword">in</span> cur_node.neighbors():
                nodes.put((neighbor.cost(heuristic_mode), neighbor))
</code></pre>
<h3 id="A"><a href="#A" class="headerlink" title="A*"></a>A*</h3><p>启发式函数<code>h(n)</code>告诉<code>A*</code>从任何结点n到目标结点的最小代价评估值。因此选择一个好的启发式函数很重要。<br><code>A*</code> 计算<code>f(n) = g(n) + h(n)</code>。为了将两个值相加，这两个值必须使用相同的单位去度量。如果度量<code>g(n)</code>的单位是小时，衡量<code>h(n)</code>的单位是米，则<code>A*</code>将认为g或h太大或太小，因此，要么无法得到好的路径，要么<code>A*</code>的运行速度会更慢。<br><code>A*</code>算法的伪代码如下：  </p>
<div align="center"><br><img src="/images/aStar.png" width="60%" alt="A*"><br></div>    

<p><code>A*</code>算法实现如下：  </p>
<pre><code class="py"><span class="function"><span class="keyword">def</span> <span class="title">aStar</span><span class="params">(self, heuristic_mode)</span>:</span>
    cur_node = self.start
    nodes = PriorityQueue()
    nodes.put((cur_node.cost(heuristic_mode), cur_node))
    visited = []
    <span class="keyword">while</span> <span class="keyword">True</span>:
        <span class="keyword">if</span> nodes.empty():
            <span class="keyword">return</span> <span class="keyword">None</span>
        cur_node = nodes.get()[<span class="number">1</span>]
        <span class="keyword">if</span> cur_node.isGoal():
            <span class="keyword">return</span> cur_node
        <span class="keyword">elif</span> cur_node.state.puzzle <span class="keyword">not</span> <span class="keyword">in</span> visited:
            visited.append(cur_node.state.puzzle)
            <span class="keyword">for</span> neighbor <span class="keyword">in</span> cur_node.neighbors():
                nodes.put((neighbor.cost(heuristic_mode) + neighbor.depth, neighbor))
</code></pre>
<h3 id="启发式函数"><a href="#启发式函数" class="headerlink" title="启发式函数"></a>启发式函数</h3><p>针对八数码问题，考虑两个相对间的的启发式函数：  </p>
<ol>
<li><code>wrongPlace</code>，摆放位置错位的数字个数。  </li>
<li><code>distance_manhattan</code>，曼哈顿距离，计算元素当前位置到目标位置的曼哈顿距离之和。  </li>
</ol>
<p>两个启发式函数的代码如下：  </p>
<pre><code class="py"><span class="function"><span class="keyword">def</span> <span class="title">cost</span><span class="params">(self, heuristic_mode)</span>:</span>
    <span class="keyword">return</span> self.placeWrong() <span class="keyword">if</span> heuristic_mode == <span class="number">0</span> <span class="keyword">else</span> self.distance_manhattan()

<span class="function"><span class="keyword">def</span> <span class="title">placeWrong</span><span class="params">(self)</span>:</span>
    errors = <span class="number">0</span>
    count = <span class="number">1</span>
    all = self.state.order ** <span class="number">2</span>
    <span class="keyword">for</span> i <span class="keyword">in</span> range(self.state.order):
        <span class="keyword">for</span> j <span class="keyword">in</span> range(self.state.order):
            <span class="keyword">if</span> self.state.puzzle[i][j] != count % all:
                errors += <span class="number">1</span>
            count += <span class="number">1</span>
    <span class="keyword">return</span> errors

<span class="function"><span class="keyword">def</span> <span class="title">distance_manhattan</span><span class="params">(self)</span>:</span>
    res = <span class="number">0</span>
    <span class="keyword">for</span> i <span class="keyword">in</span> range(self.state.order):
        <span class="keyword">for</span> j <span class="keyword">in</span> range(self.state.order):
            index = self.state.puzzle[i][j] - <span class="number">1</span>
            dis = <span class="number">0</span> <span class="keyword">if</span> index == <span class="number">-1</span> <span class="keyword">else</span> abs(i - int(index/self.state.order)) + abs(j - int(index % self.state.order))
            res += dis
    <span class="keyword">return</span> res
</code></pre>
<h2 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h2><h3 id="Puzzle-Node"><a href="#Puzzle-Node" class="headerlink" title="Puzzle, Node"></a>Puzzle, Node</h3><p>上文的两段思考提到，首先需要将<code>Puzzle</code>的生成、移动、深度等方法或属性集成；接着，我们的算法操作的都是状态节点，而不是状态本身，为了方便对<code>Puzzle</code>进行堆栈、队列操作，同时分离二者有助于我们后续添加算法，因此再构建<code>Node</code>类，并将启发式函数归为本类。   </p>
<h3 id="Solution"><a href="#Solution" class="headerlink" title="Solution"></a>Solution</h3><p>在<code>solution.py</code>中，集成了问题求解的几个算法。</p>
<h3 id="Others"><a href="#Others" class="headerlink" title="Others"></a>Others</h3><p>在<code>misc.py</code>中，设计了两个函数计算随机生成状态的逆序和，以及判断是否可解。<br>最终测试结果在<code>AIMA_HW1_Test.ipynb</code>文件中。</p>
<h2 id="结果分析"><a href="#结果分析" class="headerlink" title="结果分析"></a>结果分析</h2><p>生成30个随机初始状态。  </p>
<pre><code class="py">order = <span class="number">3</span>
steps = <span class="number">30</span>
puzzles = []
<span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">30</span>):
    t = puzzle.Puzzle(order)
    t.shuffle(steps)
    puzzles.append(t)
</code></pre>
<p>生成的随机初始状态如下：  </p>
<pre>
1 0 2       2 3 6       1 2 3       1 3 0 
7 6 3       1 4 0       4 8 5       5 2 6
5 4 8       7 5 8       7 6 0       4 7 8

1 8 2       2 5 3       1 3 5       1 3 6 
5 4 3       4 1 0       4 2 0       4 0 8
0 7 6       7 8 6       7 8 6       7 2 5

0 2 3       1 5 2       1 5 2       4 1 2
1 5 6       0 4 3       3 7 6       5 3 0
4 7 8       7 8 6       4 0 8       7 8 6

2 4 3       1 0 5       1 2 3       1 2 3
0 7 5       4 3 2       7 4 6       4 0 6
8 1 6       7 8 6       0 5 8       7 5 8

...
</pre>  

<p>执行不同搜索算法，并记录平均执行时间：  </p>
<pre><code class="py"><span class="comment"># 0: Greedy with wrongplace cost</span>
<span class="comment"># 1: Greedy with manhattan cost</span>
<span class="comment"># 2: A* with wrongplace cost</span>
<span class="comment"># 3: A* with manhattan cost</span>
<span class="comment"># 4: IDS</span>
<span class="function"><span class="keyword">def</span> <span class="title">eval</span><span class="params">(puzzles, algos)</span>:</span>
    timeuse = []
    <span class="keyword">for</span> i <span class="keyword">in</span> algos:
        start = time.time()
        <span class="keyword">if</span> i == <span class="number">4</span>:
            print(<span class="string">"-------------------IDS------------------------"</span>)
            <span class="keyword">for</span> t <span class="keyword">in</span> puzzles:
<span class="comment">#                 t.toString()</span>
                s = solution.Solution(t)
                print(<span class="string">"Routes:"</span>, s.IDS())
        <span class="keyword">elif</span> i == <span class="number">0</span>:
            print(<span class="string">"----------Greedy heuristic wrongPlace----------------"</span>)
            <span class="keyword">for</span> t <span class="keyword">in</span> puzzles:
<span class="comment">#                 t.toString()</span>
                s = solution.Solution(t)
                print(<span class="string">"Routes:"</span>, s.greedy(<span class="number">0</span>))
        <span class="keyword">elif</span> i == <span class="number">1</span>:
            print(<span class="string">"----------Greedy heuristic manhattan----------------"</span>)
            <span class="keyword">for</span> t <span class="keyword">in</span> puzzles:
<span class="comment">#                 t.toString()</span>
                s = solution.Solution(t)
                print(<span class="string">"Routes:"</span>, s.greedy(<span class="number">1</span>))
        <span class="keyword">elif</span> i == <span class="number">2</span>:
            print(<span class="string">"-------------A* heuristic wrongPlace----------------"</span>)
            <span class="keyword">for</span> t <span class="keyword">in</span> puzzles:
<span class="comment">#                 t.toString()</span>
                s = solution.Solution(t)
                print(<span class="string">"Routes:"</span>, s.aStar(<span class="number">0</span>))
        <span class="keyword">elif</span> i == <span class="number">3</span>:
            print(<span class="string">"-------------A* heuristic manhattan-----------------"</span>)
            <span class="keyword">for</span> t <span class="keyword">in</span> puzzles:
<span class="comment">#                 t.toString()</span>
                s = solution.Solution(t)
                print(<span class="string">"Routes:"</span>, s.aStar(<span class="number">1</span>))

        print(<span class="string">"--------------------Time------------------------------"</span>)
        during = time.time() - start
        timeuse.append(during)
        print(during/len(puzzles))
        print(<span class="string">"----------------------------------------------------------"</span>)
    <span class="keyword">return</span> timeuse

timeuse = eval(puzzles, [<span class="number">4</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>])
print(timeuse)
</code></pre>
<h3 id="执行结果"><a href="#执行结果" class="headerlink" title="执行结果"></a>执行结果</h3><p><strong>IDS执行结果</strong>  </p>
<div align="center"><br><img src="/images/IDS_run.png" width="60%" alt="IDS_run"><br></div>   

<p><strong>Greedy, wrongPlace执行结果</strong>  </p>
<div align="center"><br><img src="/images/Greedy_run1.png" width="60%" alt="Greedy_wrongPlace"><br></div>   

<p><strong>Greedy, manhattan执行结果</strong>  </p>
<div align="center"><br><img src="/images/Greedy_run2.png" width="60%" alt="Greedy_manhattan"><br></div>   

<p><strong>AStar, wrongPlace执行结果</strong>  </p>
<div align="center"><br><img src="/images/AStar_run1.png" width="60%" alt="AStar_wrongPlace"><br></div>   

<p><strong>AStar, manhattan执行结果</strong>  </p>
<div align="center"><br><img src="/images/AStar_run2.png" width="60%" alt="AStar_manhattan"><br></div>   

<h3 id="结果分析-1"><a href="#结果分析-1" class="headerlink" title="结果分析"></a>结果分析</h3><h4 id="不同方法比较"><a href="#不同方法比较" class="headerlink" title="不同方法比较"></a>不同方法比较</h4><p><code>IDS</code>, <code>Greedy</code>与<code>A*</code>算法表现出了截然不同的性能。<code>IDS</code>的执行情况非常不理想，其余二者的算法表现都令人相当满意。经过多次的生成以及执行，发现<code>Greedy</code>与<code>A*</code>相对稳定，基本上可以保持这个平均用时得到解路径；但是<code>IDS</code>经常性出现执行时间明显过久。  </p>
<h4 id="不同启发式函数比较"><a href="#不同启发式函数比较" class="headerlink" title="不同启发式函数比较"></a>不同启发式函数比较</h4><p>本次实验用了两个启发式函数，分别是 <code>wrongPlace</code>（摆放位置错位的数字个数）、<code>distance_manhattan</code>（曼哈顿距离，计算元素当前位置到目标位置的曼哈顿距离之和）。分析可知，曼哈顿距离的度量包含了错误摆放度量的结果。因此，使用曼哈顿距离的算法表现应该相对较好。实验也证实了这一点，在<code>Greedy</code>算法中，<code>distance_manhattan</code>比<code>wrongPlace</code>执行快约7倍；在<code>A*</code>算法中，<code>distance_manhattan</code>比<code>wrongPlace</code>执行快约3倍。</p>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>经过本次实验，我对经典的搜索算法有了深刻的认识，在编写Solution代码的时候，通过抽取公用代码，极大简化了代码并降低了最终的代码量。通过对比两个启发式函数，理解了一个“好的”启发式函数对问题求解的重要性。  </p>
<p><strong><a href="">source code-&gt;github</a></strong>   </p>
<div class="footnotes"><ol><br>    <li class="footnote" id="fn:1"><br>        <p><a href="https://github.com/XFeiF/PRML-AIMA_Practice/tree/master/AIMA/8_puzzle_solution" target="_blank" rel="noopener">Source Code.  If you like it, please give a star!</a> <a href="#fnref:1" title="Source Code"> </a></p><p><br>    </p></li><br></ol></div> 


<script type="text/javascript">
    $.bigfoot();
</script>
<script type="text/javascript">
    var bigfoot = $.bigfoot({
        deleteOnUnhover: false,
        preventPageScroll: false,
        hoverDelay: 250,
    });
</script>



                                                
                            </div>
                            <footer class="article-footer">
                                
                                            
                                                
	<section id="comments" class="comment">
	  <div id="disqus_thread">
	  <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
	  </div>
	</section>

	<script type="text/javascript">
	var disqus_shortname = 'xfeif';
	(function(){
	  var dsq = document.createElement('script');
	  dsq.type = 'text/javascript';
	  dsq.async = true;
	  dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
	  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
	}());
	(function(){
	  var dsq = document.createElement('script');
	  dsq.type = 'text/javascript';
	  dsq.async = true;
	  dsq.src = '//' + disqus_shortname + '.disqus.com/count.js';
	  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
	}());
	</script>



                                                    
                                                        
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/algorithm/">algorithm</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/search/">search</a></li></ul>

                            </footer>
            </div>
            
                
<nav id="article-nav">
  
    <a href="/2018/12/11/RethinkingImageNetPretraining/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          Paper Notes[1]: Rethinking ImageNet Pre-training
        
      </div>
    </a>
  
  
    <a href="/2018/10/16/argmax-function-and-its-usage/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">axis and argmax function</div>
    </a>
  
</nav>

                    
</article>

<!-- Table of Contents -->

    <aside id="toc-sidebar">
        <div id="toc" class="toc-article">
            <strong class="toc-title">Contents</strong>
            
                <ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#题目描述"><span class="nav-number">1.</span> <span class="nav-text">题目描述</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#要求"><span class="nav-number">2.</span> <span class="nav-text">要求</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#问题解析"><span class="nav-number">3.</span> <span class="nav-text">问题解析</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#是否有解"><span class="nav-number">3.1.</span> <span class="nav-text">是否有解</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#IDS"><span class="nav-number">3.2.</span> <span class="nav-text">IDS</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Uninformed-v-s-Informed-search"><span class="nav-number">3.3.</span> <span class="nav-text">Uninformed v.s. Informed search</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Greedy"><span class="nav-number">3.4.</span> <span class="nav-text">Greedy</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#A"><span class="nav-number">3.5.</span> <span class="nav-text">A*</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#启发式函数"><span class="nav-number">3.6.</span> <span class="nav-text">启发式函数</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#代码"><span class="nav-number">4.</span> <span class="nav-text">代码</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Puzzle-Node"><span class="nav-number">4.1.</span> <span class="nav-text">Puzzle, Node</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Solution"><span class="nav-number">4.2.</span> <span class="nav-text">Solution</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Others"><span class="nav-number">4.3.</span> <span class="nav-text">Others</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#结果分析"><span class="nav-number">5.</span> <span class="nav-text">结果分析</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#执行结果"><span class="nav-number">5.1.</span> <span class="nav-text">执行结果</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#结果分析-1"><span class="nav-number">5.2.</span> <span class="nav-text">结果分析</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#不同方法比较"><span class="nav-number">5.2.1.</span> <span class="nav-text">不同方法比较</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#不同启发式函数比较"><span class="nav-number">5.2.2.</span> <span class="nav-text">不同启发式函数比较</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#总结"><span class="nav-number">6.</span> <span class="nav-text">总结</span></a></li></ol>
                    
        </div>
    </aside>
    </section>
        
      </div>
      
      <footer id="footer">
    

                <div class="container">
                    <div class="row">
                        <p>
                            <!-- Powered by <a href="http://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/iTimeTraveler/hexo-theme-hiker" target="_blank">Hexo-theme-hiker</a> </p> -->
                            <p id="copyRightEn"> &copy;
                                2015 -
                                    2019
                                        <a href="http://x-fei.me/">🍉XFeiF</a>
                                        Powered by <a href="http://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/iTimeTraveler/hexo-theme-hiker" target="_blank">Hexo-theme-hiker</a> </p>
                        </p>

                        <!-- 
                                <p id="copyRightCn">
                                    XFeiF hold copyright
                                </p>
                                 -->
                    </div>


                </div>
</footer>


<!-- min height -->

<script>
    var wrapdiv = document.getElementById("wrap");
    var contentdiv = document.getElementById("content");
    var allheader = document.getElementById("allheader");

    wrapdiv.style.minHeight = document.body.offsetHeight + "px";
    if (allheader != null) {
        contentdiv.style.minHeight = document.body.offsetHeight - allheader.offsetHeight - document.getElementById("footer").offsetHeight + "px";
    } else {
        contentdiv.style.minHeight = document.body.offsetHeight - document.getElementById("footer").offsetHeight + "px";
    }
</script>
    </div>
    <!-- <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Blog</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
    <a href="/friends" class="mobile-nav-link">Friends</a>
  
</nav> -->
    



<!-- mathjax config similar to math.stackexchange -->

<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      processEscapes: true
    }
  });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
      }
    });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for(i=0; i < all.length; i += 1) {
            all[i].SourceElement().parentNode.className += ' has-jax';
        }
    });
</script>

<script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/scripts.js"></script>




  <script src="/js/dialog.js"></script>



<!-- Google Analytics -->
<script type="text/javascript">
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-97811913-1', 'auto');
ga('send', 'pageview');

</script>
<!-- End Google Analytics -->













  </div>

  <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" style="display: none;">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h2 class="modal-title" id="myModalLabel">设置</h2>
      </div>
      <hr style="margin-top:0px; margin-bottom:0px; width:80%; border-top: 3px solid #000;">
      <hr style="margin-top:2px; margin-bottom:0px; width:80%; border-top: 1px solid #000;">


      <div class="modal-body">
          <div style="margin:6px;">
            <a data-toggle="collapse" data-parent="#accordion" href="#collapseOne" onclick="javascript:setFontSize();" aria-expanded="true" aria-controls="collapseOne">
              正文字号大小
            </a>
          </div>
          <div id="collapseOne" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingOne">
          <div class="panel-body">
            您已调整页面字体大小
          </div>
        </div>
      


          <div style="margin:6px;">
            <a data-toggle="collapse" data-parent="#accordion" href="#collapseTwo" onclick="javascript:setBackground();" aria-expanded="true" aria-controls="collapseTwo">
              夜间护眼模式
            </a>
        </div>
          <div id="collapseTwo" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingTwo">
          <div class="panel-body">
            夜间模式已经开启，再次单击按钮即可关闭 
          </div>
        </div>

        <div>
            <a data-toggle="collapse" data-parent="#accordion" href="#collapseThree" aria-expanded="true" aria-controls="collapseThree">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;关 于&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a>
        </div>
         <div id="collapseThree" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingThree">
          <div class="panel-body">
            Make everyday count!
          </div>
          <div class="panel-body">
            Copyright © 2019 XFeiF All Rights Reserved.
          </div>
        </div>
      </div>


      <hr style="margin-top:0px; margin-bottom:0px; width:80%; border-top: 1px solid #000;">
      <hr style="margin-top:2px; margin-bottom:0px; width:80%; border-top: 3px solid #000;">
      <div class="modal-footer">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">×</span></button>
      </div>
    </div>
  </div>
</div>
  
  <a id="rocket" href="#top" class=""></a>
  <script type="text/javascript" src="/js/totop.js?v=1.0.0" async=""></script>
  
    <a id="menu-switch"><i class="fa fa-bars fa-lg"></i></a>
  
</body>
</html>